diff -up llvm-project-release-16.x/llvm/include/llvm/Analysis/TargetLibraryInfo.h.16~ llvm-project-release-16.x/llvm/include/llvm/Analysis/TargetLibraryInfo.h
--- llvm-project-release-16.x/llvm/include/llvm/Analysis/TargetLibraryInfo.h.16~	2023-01-30 17:49:37.301333447 +0100
+++ llvm-project-release-16.x/llvm/include/llvm/Analysis/TargetLibraryInfo.h	2023-01-30 17:50:34.337617647 +0100
@@ -17,6 +17,17 @@
 #include "llvm/Pass.h"
 #include <optional>
 
+#ifndef __GLIBC__ // for musl
+#undef fopen64
+#undef fseeko64
+#undef fstat64
+#undef fstatvfs64
+#undef ftello64
+#undef lstat64
+#undef stat64
+#undef tmpfile64
+#endif
+
 namespace llvm {
 
 template <typename T> class ArrayRef;
diff -up llvm-project-release-16.x/llvm/lib/Support/Unix/Signals.inc.16~ llvm-project-release-16.x/llvm/lib/Support/Unix/Signals.inc
--- llvm-project-release-16.x/llvm/lib/Support/Unix/Signals.inc.16~	2023-01-30 17:49:37.302333452 +0100
+++ llvm-project-release-16.x/llvm/lib/Support/Unix/Signals.inc	2023-01-30 17:51:16.137825934 +0100
@@ -464,7 +464,7 @@ void llvm::sys::AddSignalHandler(sys::Si
 }
 
 #if defined(HAVE_BACKTRACE) && ENABLE_BACKTRACES && HAVE_LINK_H &&             \
-    (defined(__linux__) || defined(__FreeBSD__) ||                             \
+    ((defined(__linux__) && defined(__GLIBC__)) || defined(__FreeBSD__) ||                             \
      defined(__FreeBSD_kernel__) || defined(__NetBSD__))
 struct DlIteratePhdrData {
   void **StackTrace;
