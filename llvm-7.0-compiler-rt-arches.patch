diff -up llvm-7.0.0.src/projects/compiler-rt/cmake/base-config-ix.cmake.omv~ llvm-7.0.0.src/projects/compiler-rt/cmake/base-config-ix.cmake
--- llvm-7.0.0.src/projects/compiler-rt/cmake/base-config-ix.cmake.omv~	2018-04-26 00:38:39.790637290 +0200
+++ llvm-7.0.0.src/projects/compiler-rt/cmake/base-config-ix.cmake	2018-04-26 00:40:49.579645615 +0200
@@ -148,6 +148,7 @@ macro(test_targets)
         else()
           test_target_arch(x86_64 "" "-m64")
-          test_target_arch(i386 __i386__ "-m32")
+          test_target_arch(i386 __i386__ "-m32 -march=i686")
+          test_target_arch(i686 __i686__ "-m32 -march=i686")
         endif()
       else()
         if (CMAKE_SIZEOF_VOID_P EQUAL 4)
diff -up llvm-7.0.0.src/projects/compiler-rt/lib/builtins/CMakeLists.txt.omv~ llvm-7.0.0.src/projects/compiler-rt/lib/builtins/CMakeLists.txt
--- llvm-7.0.0.src/projects/compiler-rt/lib/builtins/CMakeLists.txt.omv~	2018-04-26 00:40:53.720549976 +0200
+++ llvm-7.0.0.src/projects/compiler-rt/lib/builtins/CMakeLists.txt	2018-04-26 00:41:29.108738413 +0200
@@ -527,7 +527,7 @@ else ()
       set(_arch ${arch})
       if("${arch}" STREQUAL "armv6m")
         set(_arch "arm|armv6m")
-      elseif("${arch}" MATCHES "^(armhf|armv7|armv7s|armv7k|armv7m|armv7em)$")
+      elseif("${arch}" MATCHES "^(armhf|armv7|armv7s|armv7k|armv7m|armv7em|armv8|armv8l|armv8hl|armv8hnl|armv8hcnl)$")
         set(_arch "arm")
       endif()
 
