--- llvm-3.7.0.src/tools/clang/lib/Driver/Tools.cpp.musl8~	2015-05-26 00:32:56.584436314 +0200
+++ llvm-3.7.0.src/tools/clang/lib/Driver/Tools.cpp	2015-05-26 00:35:00.142545052 +0200
@@ -7761,9 +7761,13 @@ static std::string getLinuxDynamicLinker
       return "/system/bin/linker";
   } else if (ToolChain.getArch() == llvm::Triple::x86 ||
              ToolChain.getArch() == llvm::Triple::sparc ||
-             ToolChain.getArch() == llvm::Triple::sparcel)
+             ToolChain.getArch() == llvm::Triple::sparcel) {
+    switch (ToolChain.getTriple().getEnvironment()) {
+    case llvm::Triple::Musl:
+      return "/lib/ld-musl-i386.so.1";
+    }
     return "/lib/ld-linux.so.2";
-  else if (ToolChain.getArch() == llvm::Triple::aarch64)
+  } else if (ToolChain.getArch() == llvm::Triple::aarch64)
     return "/lib/ld-linux-aarch64.so.1";
   else if (ToolChain.getArch() == llvm::Triple::aarch64_be)
     return "/lib/ld-linux-aarch64_be.so.1";
@@ -7775,10 +7779,23 @@ static std::string getLinuxDynamicLinker
       return "/lib/ld-linux.so.3";
   } else if (ToolChain.getArch() == llvm::Triple::armeb ||
              ToolChain.getArch() == llvm::Triple::thumbeb) {
-    if (ToolChain.getTriple().getEnvironment() == llvm::Triple::GNUEABIHF || (ToolChain.getTriple().getEnvironment() == llvm::Triple::GNUEABI && (ToolChain.getTriple().getVendorName().equals("hardfloat") || ToolChain.getTriple().getArchName().find('h')!=StringRef::npos)))
-      return "/lib/ld-linux-armhf.so.3";        /* TODO: check which dynamic linker name.  */
-    else
-      return "/lib/ld-linux.so.3";              /* TODO: check which dynamic linker name.  */
+    switch (ToolChain.getTriple().getEnvironment()) {
+    case llvm::Triple::Musl:
+    case llvm::Triple::MuslEABI:
+      if (ToolChain.getTriple().getVendorName().equals("hardfloat") || ToolChain.getTriple().getArchName().find('h')!=StringRef::npos)
+        return "/lib/ld-musl-armhf.so.3";
+      else
+        return "/lib/ld-musl-arm.so.3";
+    case llvm::Triple::MuslEABIHF:
+      return "/lib/ld-musl-armhf.so.3";
+    case llvm::Triple::GNUEABIHF:
+      return "/lib/ld-linux-armhf.so.3";
+    default:
+      if (ToolChain.getTriple().getVendorName().equals("hardfloat") || ToolChain.getTriple().getArchName().find('h')!=StringRef::npos)
+        return "/lib/ld-linux-armhf.so.3";
+      else
+        return "/lib/ld-linux.so.3";              /* TODO: check which dynamic linker name.  */
+    }
   } else if (ToolChain.getArch() == llvm::Triple::mips ||
              ToolChain.getArch() == llvm::Triple::mipsel ||
              ToolChain.getArch() == llvm::Triple::mips64 ||
@@ -7815,10 +7832,19 @@ static std::string getLinuxDynamicLinker
   else if (ToolChain.getArch() == llvm::Triple::sparcv9)
     return "/lib64/ld-linux.so.2";
   else if (ToolChain.getArch() == llvm::Triple::x86_64 &&
+           ToolChain.getTriple().getEnvironment() == llvm::Triple::MuslX32)
+    return "/libx32/ld-musl-x32.so.2";
+  else if (ToolChain.getArch() == llvm::Triple::x86_64 &&
            ToolChain.getTriple().getEnvironment() == llvm::Triple::GNUX32)
     return "/libx32/ld-linux-x32.so.2";
-  else
-    return "/lib64/ld-linux-x86-64.so.2";
+  else {
+    switch (ToolChain.getTriple().getEnvironment()) {
+    case llvm::Triple::Musl:
+      return "/lib/ld-musl-x86_64.so.1";
+    default:
+      return "/lib64/ld-linux-x86-64.so.2";
+    }
+  }
 }
 
 static void AddRunTimeLibs(const ToolChain &TC, const Driver &D,
